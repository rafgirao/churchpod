#!/bin/bash
# Shortcut for ChurchPod Cutter

# Get the directory of this script
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

# Activate virtualenv if it exists
if [ -d "$DIR/venv" ]; then
    source "$DIR/venv/bin/activate"
fi

# Pull latest changes from GitHub
echo "Updating ChurchPod..."
cd "$DIR"
git pull origin main

# Update dependencies
echo "Installing/Updating dependencies..."
python3 -m pip install -q -r "$DIR/config/requirements.txt"

# Run the python script
python3 "$DIR/scripts/main.py" "$@"
